---
/**
 * Homepage
 *
 * Minimal, text-first design inspired by lethain.com
 * Let the content speak for itself
 */

import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';

// Fetch profile data
const siteEntries = await getCollection('site');
const profileEntry = siteEntries.find(entry => entry.data.type === 'profile');
const profile = profileEntry?.data;

// Fetch featured portfolio items
const portfolioItems = await getCollection('portfolio');
const featuredItems = portfolioItems
  .filter(item => item.data.featured)
  .sort((a, b) => a.data.order - b.data.order)
  .slice(0, 3);

const title = `${profile?.name || 'Bradley Fay'}`;
const description = `Product leader at ${profile?.company || 'DraftKings'} representing Data Science and ML/AI.`;
---

<BaseLayout title={title} description={description}>
  <main class="homepage">
    <div class="container">
      <!-- Intro -->
      <header class="intro">
        <h1>{profile?.name || 'Bradley Fay'}</h1>
        <p class="subtitle">
          {profile?.role || 'Director, Product - Data Science & ML/AI'} at {profile?.company || 'DraftKings'}
        </p>
      </header>

      <!-- Bio -->
      <section class="bio">
        <p>
          I build AI and ML systems that workâ€”from messy problem definition to
          self-sustaining production. My focus is taking organizational chaos and
          creating structure: experimentation platforms, offer optimization systems,
          team frameworks that scale.
        </p>
        <p>
          PhD in Marketing with expertise in causal inference and behavioral economics.
          Six years leading data science at DraftKings, scaling teams from 18 to 40+
          and building systems worth hundreds of millions in impact.
        </p>
      </section>

      <!-- Links -->
      <nav class="links">
        <a href="/about">About</a>
        <a href="/portfolio">Writing</a>
        <a href="/speaking">Speaking</a>
        <a href="https://linkedin.com/in/bradleyfay">LinkedIn</a>
        <a href="mailto:bradley.fay@gmail.com">Email</a>
      </nav>

      <!-- Recent Writing -->
      {featuredItems.length > 0 && (
        <section class="recent-work">
          <h2>Recent Writing</h2>
          <ul class="work-list">
            {featuredItems.map(item => (
              <li>
                <a href={`/portfolio/${item.id}`}>{item.data.title}</a>
              </li>
            ))}
          </ul>
        </section>
      )}
    </div>
  </main>
</BaseLayout>

<style>
  .homepage {
    padding: var(--space-3xl) 0;
  }

  .intro {
    margin-bottom: var(--space-xl);
  }

  .intro h1 {
    margin-bottom: var(--space-sm);
  }

  .subtitle {
    color: var(--color-text-muted);
    font-size: var(--text-lg);
    margin: 0;
  }

  .bio {
    margin-bottom: var(--space-xl);
    max-width: var(--content-width);
  }

  .bio p {
    font-size: var(--text-lg);
    line-height: 1.8;
  }

  .links {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-md) var(--space-lg);
    margin-bottom: var(--space-3xl);
  }

  .links a {
    font-size: var(--text-base);
  }

  .recent-work {
    border-top: 1px solid var(--color-border);
    padding-top: var(--space-xl);
  }

  .recent-work h2 {
    font-size: var(--text-lg);
    font-weight: 600;
    margin-bottom: var(--space-md);
  }

  .work-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .work-list li {
    margin-bottom: var(--space-sm);
  }

  .work-list a {
    font-weight: 500;
  }

  @media (min-width: 640px) {
    .homepage {
      padding: var(--space-3xl) 0 var(--space-3xl);
    }
  }
</style>
