---
interface Props {
  /** Page title */
  title: string;
  /** Meta description */
  description: string;
  /** Optional OG image path */
  image?: string;
  /** Optional canonical URL override */
  canonicalUrl?: string;
  /** Optional article metadata for blog posts */
  article?: {
    publishedTime?: string;
    modifiedTime?: string;
    author?: string;
  };
}

const {
  title,
  description,
  image = '/images/bfay_profile.jpeg',
  canonicalUrl,
  article,
} = Astro.props;

const siteUrl = Astro.site?.toString() || 'https://bradleyfay.github.io';
const canonical = canonicalUrl || new URL(Astro.url.pathname, siteUrl).toString();
const ogImage = new URL(image, siteUrl).toString();
---

<!-- Primary Meta Tags -->
<title>{title}</title>
<meta name="title" content={title} />
<meta name="description" content={description} />
<link rel="canonical" href={canonical} />

<!-- Open Graph / Facebook -->
<meta property="og:type" content={article ? 'article' : 'website'} />
<meta property="og:url" content={canonical} />
<meta property="og:title" content={title} />
<meta property="og:description" content={description} />
<meta property="og:image" content={ogImage} />

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image" />
<meta property="twitter:url" content={canonical} />
<meta property="twitter:title" content={title} />
<meta property="twitter:description" content={description} />
<meta property="twitter:image" content={ogImage} />

{article && (
  <>
    {article.publishedTime && (
      <meta property="article:published_time" content={article.publishedTime} />
    )}
    {article.modifiedTime && (
      <meta property="article:modified_time" content={article.modifiedTime} />
    )}
    {article.author && (
      <meta property="article:author" content={article.author} />
    )}
  </>
)}
